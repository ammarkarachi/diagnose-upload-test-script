# Amplify Diagnose Test Script

This test script is used to test the Amplify Reporter Uploader Rest API

The REST API accepts a payload in the following format


```
{
    "projectIdentifier":"9ba87c10193ce572aec4d31f59f664ea",
    "projectEnvIdentifier":"56b5981ed6cf5caad90fb2f8aed150e2",
    "sessionUuid":"3a079fe9-c00d-4fb5-850b-ab2afd881993",
    "installationUuid":"edf1ee5d-036f-4ab9-aeb3-34195bc89204",
    "amplifyCliVersion":"8.0.2",
    "nodeVersion":"14.19.0",
    "key": "Pass Phrase key encrypted using Assymetric encryptiion",
    "encryptedFile": "Encrypted file encrypted using Symmeteric Encryption",
}
```

* ***projectEnvIdentifier****: A hashed combination of projectName + Amplify App Id + Env Name. It is a hex value of the combination.
* ***projectIdentifier****: A hashed combination of projectName + Amplify App Id
* ***sessionUuid***: it is a unique identifier of the customer’s invocation. It is autogenerated guid it’s not required.
* ***installationUuid****: Unique identifier of the customer’s Amplify CLI installation. It is a guid format string
* ***amplifyCliVersion****: The version of the CLI
* ***nodeVersion****: The version of the node 


To install the script dependencies run

```bash
npm i
```

To run the script you can either run with the file to transmit as a zip file


```bash
npm run upload path/to/zipfile.zip
```

or optionally also provide a payload as a second parameter


```bash
npm run upload path/to/zipfile.zip \
"{ \
\"projectIdentifier\":\"9ba87c10193ce572aec4d31f59f664ea\", \
\"projectEnvIdentifier\":\"56b5981ed6cf5caad90fb2f8aed150e2\", \
\"sessionUuid\":\"4456d7f1-6401-4420-80f5-e5d6b60a78f3\", \
\"installationUuid\":\"8bedb0a7-440a-4a77-adec-c3a18acae079\", \
\"amplifyCliVersion\":\"8.1.0\", \
\"nodeVersion\":\"14.19.0\" \
}"
```

